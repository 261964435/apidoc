{{define "api"}}
<section class="api">
    <h3 class="title">
        <span class="method {{.Method}}">{{.Method}}</span>
        <span class="url">{{.URL}}</span>
        <span class="summary">{{.Summary}}</span>
    </h3>

    <div class="content">
        {{if .Description}}
        <p class="description">{{.Description}}</p>
        {{end}}

        {{if .Queries}}
            <h4>查询参数</h4>
            {{template "param" .Queries}}
        {{end}}

        {{if .Params}}
            <h4>参数</h4>
            {{template "param" .Params}}
        {{end}}

        {{if .Request}}
        <div>
            <h4>请求{{if .Request.Type}}:{{.Request.Type}}{{end}}</h4>
            <div>
                {{if .Request.Headers}}
                    <h5>报头:</h5>
                    {{template "headers" .Request.Headers }}
                {{end}}

                {{if .Request.Params}}
                    <h5>参数:</h5>
                    {{template "param" .Request.Params}}
                {{end}}

                {{if .Request.Examples}}
                <h5>示例:</h5>
                    {{range .Request.Examples}}
                    <pre class="code" data-type="{{.Type}}">{{.Code}}</pre>
                    {{end}}
                {{end}}
            </div>
        </div>
        {{end}}

        {{if .Success}}
        <div>
            <h4>响应-SUCCESS</h4>
            {{template "response" .Success}}
        </div>
        {{end}}

        {{if .Error}}
        <div>
            <h4>响应-ERROR</h4>
            {{template "response" .Error}}
        </div>
        {{end}}
    </div>
</section>
{{end}}



{{/* @apiParam 和 @apiQuery */}}
{{define "param"}}
<table>
    <thead>
        <tr><th>名称</th><th>类型</th><th>描述</th></tr>
    </thead>
    <tbody>
    {{range .}}
    <tr>
        <td>{{.Name}}</td>
        <td>{{.Type}}</td>
        <td>{{.Summary}}</td>
    </tr>
    {{end}}
    </tbody>
</table>
{{end}}


{{/* @apiHeader */}}
{{define "headers"}}
<table>
    <thead>
        <tr><th>名称</th><th>描述</th></tr>
    </thead>
    <tbody>
    {{range $k, $v := .}}
    <tr>
        <td>{{$k}}</td>
        <td>{{$v}}</td>
    </tr>
    {{end}}
    </tbody>
</table>
{{end}}



{{/* @apiSuccess 和 @apiError */}}
{{define "response"}}
        <p><span class="status-code">status:{{.Code}}</span>{{.Summary}}</p>

        {{if .Headers}}
            <h5>请求头</h5>
            {{template "headers" .Headers}}
        {{end}}

        {{if .Params}}
            <h5>参数:</h5>
            {{template "param" .Params}}
        {{end}}

        {{if .Examples}}
        <h5>示例:</h5>
            {{range .Examples}}
            <pre class="code" data-type="{{.Type}}">{{.Code}}</pre>
            {{end}}
        {{end}}
{{end}}
